config:
    name: 家长H5_幼儿考勤
    variables:
        Protocol: ${ENV(Protocol)}
        host: ${ENV(HOST)}
        donainname: ${ENV(DONAIN_NAME)}
    verify: false
teststeps:
-   name: 家长H5_登陆
#    skip: 此功能已去除，skip掉
#    times: 5
    request:
        data:
            systemCode: h5garden
            username: ${ENV(GARDEN_USERNAME)}
            password: ${ENV(GARDEN_PASSWORD)}
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate, br
            Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
            Connection: keep-alive
            Content-Length: '78'
            Content-Type: application/x-www-form-urlencoded;charset=UTF-8
            Host: $host
            Origin: $Protocol://$host
            Referer: $Protocol://$host/school/m/
            User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38
                (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1
            X-Requested-With: XMLHttpRequest
            domainName: $donainname
        method: POST
        url: $Protocol://$host/v1/web/eduaccount/sys/login
    extract:
        token1: body.data.token
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - 0
-   name: 应用-列表收藏应用（账号收藏的应用）
    request:
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate, br
            Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
            Connection: keep-alive
            Content-Type: application/json;charset=utf-8
            Host: $host
            Referer: $Protocol://$host/school/m/
            User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38
                (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1
            X-Access-Token: $token1
            X-Requested-With: XMLHttpRequest
            domainName: $donainname
        method: GET
        params:
            platform: '2'
        url: $Protocol://$host/v1/web/edudistrict/apps/personal
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - 0
-   name: 登录相关-获取身份列表(H5)
    request:
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate, br
            Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
            Connection: keep-alive
            Content-Type: application/json;charset=utf-8
            Host: $host
            Referer: $Protocol://$host/school/m/
            User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38
                (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1
            X-Access-Token: $token1
            X-Requested-With: XMLHttpRequest
            domainName: $donainname
        method: GET
        params:
            showMsgCount: '1'
            systemCode: h5garden
        url: $Protocol://$host/v1/web/eduaccount/user/h5/identitys
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - 0
-   name: 登录相关-切换身份
    request:
        data:
            domainName: $donainname
            studentId: $studentId
            userType: '2'
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate, br
            Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
            Connection: keep-alive
            Content-Length: '52'
            Content-Type: application/x-www-form-urlencoded;charset=UTF-8
            Host: $host
            Origin: $Protocol://$host
            Referer: $Protocol://$host/school/m/
            User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38
                (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1
            X-Access-Token: $token1
            X-Requested-With: XMLHttpRequest
            domainName: $donainname
        method: POST
        url: $Protocol://$host/v1/web/eduaccount/sys/changeId
    extract:
        token2: body.data.token
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - 0
-   name: 登录相关-获取身份列表(H5)
    request:
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate, br
            Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
            Connection: keep-alive
            Content-Type: application/json;charset=utf-8
            Host: $host
            Referer: $Protocol://$host/school/m/
            User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38
                (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1
            X-Access-Token: $token2
            X-Requested-With: XMLHttpRequest
            domainName: $donainname
        method: GET
        params:
            showMsgCount: '1'
            systemCode: h5garden
        url: $Protocol://$host/v1/web/eduaccount/user/h5/identitys
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - 0
-   name: 应用-列表收藏应用（账号收藏的应用）
    request:
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate, br
            Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
            Connection: keep-alive
            Content-Type: application/json;charset=utf-8
            Host: $host
            Referer: $Protocol://$host/school/m/
            User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38
                (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1
            X-Access-Token: $token2
            X-Requested-With: XMLHttpRequest
            domainName: $donainname
        method: GET
        params:
            platform: '2'
        url: $Protocol://$host/v1/web/edudistrict/apps/personal
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - 0
-   name: 应用-推荐应用-全部应用（账号角色可用的应用，可识别账号收藏的应用）
    request:
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate, br
            Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
            Connection: keep-alive
            Content-Type: application/json;charset=utf-8
            Host: $host
            Referer: $Protocol://$host/school/m/
            User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38
                (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1
            X-Access-Token: $token2
            X-Requested-With: XMLHttpRequest
            domainName: $donainname
        method: GET
        params:
            platform: '2'
        url: $Protocol://$host/v1/web/edudistrict/apps/org
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - 0
-   name: 考勤花名册-详情
    request:
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate, br
            Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
            Connection: keep-alive
            Content-Type: application/json;charset=utf-8
            Host: $host
            Referer: $Protocol://$host/school/m/
            User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38
                (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1
            X-Access-Token: $token2
            X-Requested-With: XMLHttpRequest
            domainName: $donainname
        method: GET
        params:
            date: '2021-04-07'
            gradeId: '8'
            studentId: $studentId
        url: $Protocol://$host/v1/web/edugarden/attendance/roster/get
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - 0
-   name: 出勤概况-查看人考勤状态
    request:
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate, br
            Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
            Connection: keep-alive
            Content-Type: application/json;charset=utf-8
            Host: $host
            Referer: $Protocol://$host/school/m/
            User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38
                (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1
            X-Access-Token: $token2
            X-Requested-With: XMLHttpRequest
            domainName: $donainname
        method: GET
        params:
            endDate: '2021-04-07'
            startDate: '2021-04-01'
            studentId: $studentId
        url: $Protocol://$host/v1/web/edugarden/statistic/queryAll
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - 0
